<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1607055557776596" crossorigin="anonymous"></script>
  <meta name="google-site-verification" content="ZWidhp29xotLZ2B8B4mHHEtWvixWj6HhA9Uaav06BYA" />
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-N3QQWX28');</script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-H423N499KV"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-H423N499KV');
  </script>
    <meta charset="UTF-8">
  <meta name="google-adsense-account" content="ca-pub-1607055557776596">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, interactive-widget=resizes-content">
    <title>Nothing Space - Built Together</title>
    <meta name="description" content="Community hub for Nothing Phone users. Download firmware, wallpapers, and tools.">

    <link rel="icon" type="image/svg+xml" href="./icon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>

    <link rel="preconnect" href="https://nothingcommunity-7664f-default-rtdb.firebaseio.com">

  <style>
    /* ================= ROOT & THEME ================= */
    :root { 
        --bg: #000; --card: #0c0c0c; --text: #fff; --dot-bg: #222; 
        --border: #1a1a1a; --instr: #bbb; --accent: #ff0000;
        --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        color-scheme: light dark;
    }
    [data-theme="light"] { --bg: #fff; --card: #f5f5f5; --text: #000; --dot-bg: #ddd; --border: #eee; --instr: #333; }
    [data-theme="dark"] { --bg: #000; --card: #0c0c0c; --text: #fff; --dot-bg: #250; --border: #1a1a1a; --instr: #bbb; }

    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body { 
        background: var(--bg); color: var(--text); font-family: 'VT323', monoSpace; 
        transition: background var(--transition); width: 100%; overflow-x: hidden; min-height: 100vh;
        overscroll-behavior-y: none; 
    }

    h1, h2, h3, span, button, select, input, p, textarea { font-family: 'VT323', monoSpace !important; text-transform: uppercase; }

    /* PERFORMANCE OPTIMIZATION */
    .bento, footer { content-visibility: auto; contain-intrinsic-size: 1000px; }
    
    img { 
        -webkit-touch-callout: none !important; user-select: none !important; pointer-events: auto !important;
    }

    /* ================= BACKGROUND ANIMATIONS ================= */
    .stars-container { position: fixed; inset: 0; z-index: -1; background: var(--bg); overflow: hidden; pointer-events: none; }
    .star { position: absolute; background: var(--text); border-radius: 50%; opacity: 0; will-change: opacity; }

    .canvas { 
        position: fixed; inset: 0; background-image: radial-gradient(var(--dot-bg) 1.2px, transparent 1.2px); 
        background-size: 32px 32px; z-index: -1; opacity: 0.5; pointer-events: none;
    }

    .moon {
        position: fixed; width: 80px; height: 80px; 
        top: 10%; left: 10%; 
        background: #d1d1d1; border-radius: 50%; z-index: -1; opacity: 0.5;
        box-shadow: inset -15px -15px 30px rgba(0,0,0,0.5), 0 0 20px rgba(255,255,255,0.2);
    }

    /* ================= HEADER & BENTO ================= */
    header { max-width: 1000px; margin: 30px auto 20px; padding: 0 20px; display: flex; flex-direction: column; gap: 20px; position: relative; z-index: 10; }
    .header-top { width: 100%; display: flex; justify-content: space-between; align-items: center; }
    .logo h1 { font-size: 3.5rem; letter-spacing: -1px; line-height: 0.9; }
    .logo p { opacity: 0.8 !important; letter-spacing: 2px; }

    .t-toggle { width: 45px; height: 45px; border-radius: 50%; border: 1px solid var(--border); display: grid; place-items: center; cursor: pointer; background: var(--card); transition: var(--transition); }
    .t-toggle:hover { border-color: var(--text); }
    #t-icon { color: var(--text) !important;transition: transform .3s ease; } 
    .t-toggle:active #t-icon { transform: rotate(150deg) scale(1.1); }

    .bento { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; max-width: 1000px; margin: 0 auto; padding: 20px; overflow: visible; position: relative; z-index: 10; }      
    @media (min-width: 768px) { .bento { grid-template-columns: repeat(3, 1fr); } }

    .tile { 
        background: var(--card); border: 1px solid var(--border); border-radius: 35px; padding: 25px; cursor: pointer; transition: var(--transition);
        opacity: 1; transform: none; position: relative; overflow: hidden;
    }
    .tile:hover { border-color: #333; transform: translateY(-2px); }
    .tile:active { transform: scale(0.95); }
    .tile h2 { font-size: 2.2rem; position: relative; z-index: 2; }
    .tile p { opacity: 0.8 !important; font-size: 1rem; position: relative; z-index: 2; }
    .full { grid-column: span 2; }
    @media (min-width: 768px) { .full { grid-column: span 1; } }
    
    /* ================= MODALS & SCREEN ================= */
    .screen { 
        position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(15px); z-index: 2000; 
        display: none; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s ease;
        height: 100dvh;
    }
    .screen.active { display: flex !important; opacity: 1; }

    .modal { 
        background: var(--bg); border: 1px solid var(--border); width: 90%; max-width: 500px; 
        max-height: 90dvh;
        border-radius: 35px; padding: 30px; position: relative; overflow-y: auto;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); opacity: 0; transform: scale(0.7) translateY(50px);
        transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.4s ease; will-change: transform, opacity;
        display: flex; flex-direction: column;
    }
    .modal > div { flex-shrink: 0 !important; }
    .screen.active .modal { opacity: 1; transform: scale(1) translateY(0); }
    .close-icon { position: absolute; right: 25px; top: 25px; font-size: 2.2rem; cursor: pointer; opacity: 0.5; transition: 0.2s; z-index: 10; background:transparent; border:none; color:var(--text); }
    .close-icon:hover { opacity: 1; color: var(--text); }
    .modal h2 { margin-bottom: 20px !important; margin-top: 5px !important; line-height: 1; }

    /* ================= BUTTONS & INPUTS ================= */
    .input-group { position: relative; width: 100%; margin-bottom: 12px; display: flex; align-items: center; }
    select, input, textarea { width: 100%; padding: 20px; background: var(--card); border: 1px solid var(--border); color: var(--text); border-radius: 22px; font-size: 1.6rem; outline: none; appearance: none; }
    textarea { font-size: 1.2rem; resize: none; }
    .arrow-wrapper { position: absolute; right: 25px; pointer-events: none; color: var(--text); }

    .btn { 
        position: relative; width: 100%; padding: 18px; border-radius: 22px; border: none; 
        background: var(--text); color: var(--bg); font-size: 1.6rem; cursor: pointer; font-weight: bold; margin-top: 5px; 
        overflow: hidden; display: flex; justify-content: center; align-items: center; transition: 0.2s;
    }
    .progress-bar { position: absolute; left: 0; top: 0; height: 100%; width: 0%; background: rgba(128,128,128,0.5); z-index: 1; }
    .btn-text { position: relative; z-index: 2; }
    .pg-btn {
        width: 100%; padding: 20px 30px; border-radius: 22px; background: var(--card); border: 1px solid var(--border); color: var(--text); 
        font-size: 1.2rem; letter-spacing: 1px; display: flex; justify-content: space-between; align-items: center;
        cursor: pointer; margin-bottom: 15px; font-weight: thin; transition: 0.2s; text-transform: uppercase;
    }
    .pg-btn:hover { border-color: var(--text); }
    
    /* DOT ARROW CSS */
    .dot-arrow { width: 20px; height: 10px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 1px; }
    .dot-row { display: flex; gap: 2px; }
    .dot { width: 2.5px; height: 2.5px; background: var(--text); border-radius: 50%; }

    /* ================= SETUP MODULE CSS (3D SCROLL & SHRINK) ================= */
    .setup-grid-container {
        padding-top: 20px; /* Spacer for 3D feel */
        padding-bottom: 30px;
    }

    .setup-card { 
        background: var(--card); 
        border: 1px solid var(--border); 
        border-radius: 30px; 
        padding: 25px; 
        margin-bottom: 0px; 
        
        /* 3D Animation Properties */
        transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.4s ease, filter 0.4s ease;
        transform: scale(0.85); /* Default Small */
        opacity: 0.4; /* Default Faded */
        filter: blur(2px);
        transform-origin: center center;
    }
    
    /* Active State for Center Card */
    .setup-card.in-focus {
        transform: scale(1);
        opacity: 1;
        filter: blur(0px);
        z-index: 10;
    }

    .setup-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; }
    .phone-showcase { display: flex; justify-content: center; gap: 15px; margin-bottom: 15px; }
    .phone-frame { width: 48%; aspect-ratio: 9/19; background: #000; border-radius: 18px; border: 2px solid #333; overflow: hidden; cursor: pointer; transition: 0.2s; }
    .phone-frame.active { border-color: var(--accent); transform: scale(1.02); }
    .phone-frame img { width: 100%; height: 100%; }
    .dl-btn { width: 100%; background: var(--text); color: var(--bg); border: none; padding: 12px; border-radius: 12px; font-weight: bold; display: none; margin-top: 10px; cursor: pointer; }
    .upload-box { background: var(--card); padding: 20px; border-radius: 20px; border: 1px solid var(--border); margin-bottom: 20px; }
    .upload-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px; }
    .upload-area { border: 1px dashed #444; border-radius: 12px; height: 100px; display: grid; place-items: center; cursor: pointer; color: #666; background: rgba(255,255,255,0.02); overflow: hidden; }
    .upload-area img { width: 100%; height: 100%; object-fit: contain; }
    .like-btn { background: transparent; border: 1px solid #333; color: var(--text); padding: 8px 16px; border-radius: 50px; cursor: pointer; display: flex; align-items: center; gap: 8px; font-size:1.1rem;}
    .like-btn.liked { background: var(--accent); border-color: var(--accent); color: white; }

    /* ================= NEW CUSTOM SELECTOR UI ================= */
    .selector-list { display: flex; flex-direction: column; max-height: 60vh; overflow-y: auto; gap:8px; }
    .selector-item {
        padding: 20px; background: var(--card); border: 1px solid var(--border); 
        border-radius: 22px; cursor: pointer; font-size: 1.4rem;
        transition: 0.2s; display: flex; justify-content: space-between; align-items: center;
    }
    .selector-item:hover { border-color: var(--text); transform: translateX(5px); }
    .selector-item:active { transform: scale(0.98); }

    .custom-select-trigger {
        width: 100%; padding: 20px; background: var(--card); border: 1px solid var(--border);
        color: var(--text); border-radius: 22px; font-size: 1.6rem; cursor: pointer;
        display: flex; justify-content: space-between; align-items: center;
    }

    /* ================= CHAT STYLES ================= */
    .red-dot-loader { width: 10px; height: 10px; background-color: #ff0000; border-radius: 50%; display: inline-block; box-shadow: 0 0 8px #ff0000; animation: pulse-red 0.8s ease-in-out infinite; }
    @keyframes pulse-red { 0% { transform: scale(0.8); opacity: 0.6; } 50% { transform: scale(1.2); opacity: 1; } 100% { transform: scale(0.8); opacity: 0.6; } }

    .msg-bubble { 
        background: rgba(255,255,255,0.03); border: 1px solid var(--border); padding: 12px 15px; 
        border-radius: 20px; position: relative; max-width: 85%; align-self: flex-start;
        margin-bottom: 10px; display: flex; flex-direction: column; cursor: pointer;
        transition: background 0.2s;
    }
    .msg-bubble:active { background: rgba(255,255,255,0.08); }
    .msg-bubble.self { align-self: flex-end; background: rgba(255, 255, 255, 0.1); border-color: var(--text); text-align: right; }
    .msg-bubble.self .u-badge { align-self: flex-end; }

    .u-badge { font-size: 0.7rem; background: var(--text); color: var(--bg); padding: 2px 8px; border-radius: 5px; margin-bottom: 5px; display: inline-block; align-self: flex-start; cursor: pointer; }
    .u-badge:active { transform: scale(0.95); } /* Feedback for tap */
    
    .admin-reply-box { margin-top: 10px; padding: 8px 12px; background: rgba(255, 0, 0, 0.05); border-left: 2px solid var(--accent); border-radius: 10px; font-size: 0.9rem; }
    .admin-tag { color: var(--accent); font-weight: bold; font-size: 0.7rem; display: block; margin-bottom: 2px; }

    .msg-img { max-width: 100%; border-radius: 12px; margin-top: 5px; margin-bottom: 5px; border: 1px solid rgba(255,255,255,0.2); cursor: pointer; }
    #imgPreview { display: none; width: 40px; height: 40px; object-fit: cover; border-radius: 8px; margin-right: 10px; border: 1px solid var(--accent); cursor: pointer; }

    /* --- FIXED REPLY & DELETE UI --- */
    #replyBanner {
        background: var(--card); 
        border-bottom: 1px solid var(--border); 
        padding: 10px 15px;
        display: none; 
        align-items: center;
        justify-content: space-between;
        gap: 15px;
        font-size: 0.9rem; 
        animation: slideUp 0.2s ease; 
        color: var(--text);
        max-width: 100%; 
    }
    
    .reply-info {
        display: flex; 
        flex-direction: column; 
        flex: 1;
        overflow: hidden; 
        min-width: 0; 
    }

    #replyText { 
        opacity: 0.7; 
        white-space: nowrap; 
        overflow: hidden; 
        text-overflow: ellipsis; 
        display: block;
        width: 100%;
    }
    
    .close-reply-btn {
        background: none; 
        border: none; 
        color: var(--text); 
        cursor: pointer; 
        font-size: 1.5rem; 
        flex-shrink: 0; 
        padding: 0 5px;
    }
    @keyframes slideUp { from { transform: translateY(10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

    .quoted-block {
        background: rgba(127, 127, 127, 0.15); border-left: 3px solid var(--text); padding: 6px 10px;
        border-radius: 6px; margin-bottom: 8px; font-size: 0.85rem; display: flex; flex-direction: column; cursor: pointer;
        text-align: left;
    }
    .q-name { font-weight: bold; font-size: 0.75rem; opacity: 0.9; margin-bottom: 2px; }
    .q-text { opacity: 0.7; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    
    .msg-footer { 
        display: none; justify-content: flex-end; align-items: center; gap: 15px; margin-top: 6px; 
        border-top: 1px solid rgba(255,255,255,0.05); padding-top: 5px;
        animation: fadeIn 0.2s ease;
    }
    .msg-bubble.active-actions .msg-footer { display: flex; }

    .action-btn { font-size: 0.8rem; opacity: 0.6; cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 5px; padding: 2px 5px; }
    .action-btn:hover { opacity: 1; color: var(--accent); }
    .del-btn:hover { color: #ff4444; }

    /* ================= IMAGE VIEWER ================= */
    #imgViewer {
        position: fixed; inset: 0; z-index: 5000;
        background: rgba(0,0,0,0.95); display: none;
        flex-direction: column; justify-content: center; align-items: center;
        opacity: 0; transition: opacity 0.3s ease;
    }
    #imgViewer.active { opacity: 1; }
    #viewImg { max-width: 95%; max-height: 80%; border-radius: 10px; box-shadow: 0 0 20px rgba(255,0,0,0.2); }
    .viewer-ctrls { position: absolute; bottom: 30px; display: flex; gap: 20px; }
    .v-btn {
        background: #333; color: #fff; border: 1px solid #555;
        padding: 10px 20px; border-radius: 50px; cursor: pointer;
        font-size: 1rem; display: flex; align-items: center; gap: 8px;
    }

    /* ================= MUSIC UI ================= */
    .music-ui { text-align: center; }
    .search-box-m { display: flex; background: #eef2f7 !important; padding: 5px 10px; border-radius: 50px !important; border: 1px solid var(--border); margin-bottom: 20px; align-items: center; }
    .search-box-m input { flex: 1; background: transparent !important; border: none !important; color: #000 !important; padding: 12px; font-size: 1.2rem; outline: none; }
    .go-btn { width: 40px !important; height: 40px !important; border-radius: 50% !important; border: none; background: #000 !important; color: #fff !important; cursor: pointer; display: flex; align-items: center; justify-content: center; }
    #music-card { display: none; margin-top: 20px; background: var(--card); border: 1px solid var(--border); border-radius: 30px; padding: 20px; text-align: center; }
    .disc { width: 140px; height: 140px; border-radius: 50%; border: 2px solid var(--border); margin: 0 auto 15px auto; object-fit: cover; display: block; }
    .spinning { animation: rotate 10s linear infinite; }
    @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    .m-ctrls { display: flex; justify-content: center; align-items: center; gap: 30px; font-size: 1.8rem; margin: 20px 0; }
    #mini-player { position:absolute; top:65px; right:90px; width:45px; height:45px; border-radius:50%; border:2px solid var(--accent); overflow:hidden; cursor:pointer; display:none; z-index:10; background:#000; }
    #mini-art { width:100%; height:100%; object-fit:cover; display:block; }

    /* ================= WALLPAPERS & CARDS ================= */
    .wp-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 20px; }
    .wp-card { 
        height: 250px; background: #111; border-radius: 25px; position: relative; overflow: hidden; border: 1px solid var(--text);
        opacity: 1; transform: translateY(0); transition: opacity 0.6s ease-out, transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    .wp-card.hidden-state { opacity: 0; transform: translateY(50px) scale(0.95); }
    .wp-card.scroll-active { opacity: 1; transform: translateY(0) scale(1); }
    .wp-card img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; display: block; }
    .wp-overlay { position: absolute; bottom: 0; width: 100%; padding: 10px; background: linear-gradient(transparent, rgba(0,0,0,0.9)); text-align: center; }
    .wp-overlay p { color: #fff !important; opacity: 1 !important; font-weight: bold; text-shadow: 1px 1px 3px rgba(0,0,0,0.5); }
    .wp-overlay .btn { width: 90%; margin: 5px auto 0; padding: 8px 0; font-size: 1rem; border-radius: 15px; background: #fff !important; }
    .wp-overlay .btn .btn-text { color: #000 !important; font-weight: bold !important; opacity: 1 !important; }

    /* ================= OTHER MODULES ================= */
    .up-box { background: var(--card); border: 1px solid var(--border); border-radius: 20px; padding: 15px; margin-bottom: 12px; }
    .up-box h4 { font-size: 1.4rem; color: var(--text) !important; }
    .up-box p { font-size: 0.9rem; opacity: 0.8 !important; margin-top: 4px; text-transform: none; }
    
    .sw-display { display: none; align-items: center; gap: 15px; margin: 0 0 12px; padding: 15px; background: var(--card); border-radius: 25px; border: 1px solid var(--border); animation: fadeIn 0.3s ease; }
    .sw-img-box { width: 70px; height: 90px; border-radius: 12px; overflow: hidden; background: var(--card); flex-shrink: 0; }
    .sw-img-box img { width: 120%; height: 100%; object-fit: cover; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    
    .guide-box { border: 1px solid var(--border); border-radius: 22px; margin-bottom: 12px; overflow: hidden; margin-top: 0px; background: var(--card); }
    .guide-header { padding: 18px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
    .guide-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-in-out, opacity 0.3s ease, padding 0.3s ease; padding: 0 18px; opacity: 0; }
    .guide-content.open { max-height: 800px !important; padding: 18px; opacity: 1; border-top: 1px solid var(--border); }
    .guide-content p { color: var(--text) !important; opacity: 0.8 !important; text-transform: none; font-size: 1.1rem; margin-bottom: 12px; }

    .detail-card { background: var(--card); border: 1px solid var(--border); border-radius: 30px; padding: 25px; margin-top: 2px; animation: fadeIn 0.3s ease; }
    
    .sc-badge { background: #222; color: #888; padding: 4px 10px; border-radius: 8px; font-size: 0.9rem; border: 1px solid var(--border); }
    .card-row { display: flex; gap: 10px; margin-top: 15px; }

    footer { text-align: center; padding: 30px; opacity: 1 !important; font-size: 0.8rem; letter-spacing: 1px; margin-top: 10px; position: relative; z-index: 10; }
    .footer-links { display: flex; justify-content: center; gap: 20px; margin-bottom: 10px; flex-wrap: wrap; }
    footer a { color: var(--text); }
    footer p { opacity: 0.8 !important; }
    #aiSection { display: none; background: var(--card); border: 1px solid var(--border); padding: 15px; border-radius: 25px; margin-bottom: 20px; animation: fadeIn 0.3s ease; }
  </style>
</head>
<body>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N3QQWX28" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <div class="stars-container" id="starField"></div>
  <div class="canvas"></div>

  <header>
    <div class="header-top">
      <div class="logo">
        <p style="opacity: 0.4; letter-spacing: 2px;">ONLY FOR FANS</p>
        <h1>Nothing<br>Space</h1>
      </div>
      <button class="t-toggle" onclick="toggleTheme()" aria-label="Toggle Dark Mode">
        <i class="fa-solid fa-sun" id="t-icon"></i>
      </button>
    </div>
  </header>

  <div class="bento">
    <div class="tile full" onclick="openScreen('upScr')"><h1>WEBSITE</h1><p>WHAT'S NEW ADDED</p></div>
    <div class="tile full" onclick="openScreen('musicScr')"><h1>RINGTONE</h1><p>Preview Your Song</p></div>
    <div class="tile full" onclick="openScreen('setupScr')"><h1>LAYOUTS</h1><p>RANK & SHARE BUILDS</p></div>
    <div class="tile full" onclick="openScreen('pgScr')"><h1>PLAYGROUND</h1><p>presets WIDGETs APPs</p></div>
    <div class="tile full" onclick="openScreen('swScr')"><h1>FIRMWARE</h1><p>NOS ZIP FILE</p></div>
    <div class="tile full" onclick="openScreen('wpScr')"><h1>GALLERY</h1><p>EXCLUSIVe Collection</p></div>
    <div class="tile full" onclick="openScreen('scScr')"><h1>SUPPORT</h1><p>LOCATE CENTERS</p></div>
    <div class="tile full" onclick="openScreen('feedbackScr')"><h1>COMMUNITY</h1><p>FEEDBACK & SUGGESTIONS</p></div>
  </div>

  <div id="mini-player" onclick="restorePlayer()">
    <img src="" id="mini-art" class="spinning" alt="Mini Player Art">
  </div>

  <div id="imgViewer" onclick="closeImageViewer()">
    <button style="position:absolute; top:20px; right:20px; background:none; border:none; color:#fff; font-size:2rem; cursor:pointer;">×</button>
    <img id="viewImg" src="" onclick="event.stopPropagation()">
    <div class="viewer-ctrls" onclick="event.stopPropagation()">
      <button class="v-btn" onclick="downloadViewImage()"><i class="fa-solid fa-download"></i> SAVE</button>
      <button class="v-btn" onclick="closeImageViewer()"><i class="fa-solid fa-xmark"></i> CLOSE</button>
    </div>
  </div>

  <div id="selectorScr" class="screen" style="z-index: 3000;">
    <div class="modal">
      <button class="close-icon" onclick="closeScreen('selectorScr')">×</button>
      <h2 id="selectorTitle">SELECT OPTION</h2>
      <div id="selectorList" class="selector-list" style="margin-top: 20px;"></div>
    </div>
  </div>

  <div id="setupScr" class="screen">
    <div class="modal">
        <button class="close-icon" onclick="closeScreen('setupScr')">×</button>
        <h2 style="border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 20px;">TOP SETUPS</h2>
        
        <button class="pg-btn" onclick="toggleUpload()">
            <span>UPLOAD YOUR SETUP</span>
            <i class="fa-solid fa-plus"></i>
        </button>

        <div id="setupUploadForm" class="upload-box" style="display:none;">
            <span style="display:block;color:var(--accent);margin-bottom:5px;">1. SCREENSHOTS (DISPLAY)</span>
            <div class="upload-grid">
                <div class="upload-area" onclick="document.getElementById('ssLockIn').click()"><div id="prevSsLock">LOCK SS</div></div>
                <div class="upload-area" onclick="document.getElementById('ssHomeIn').click()"><div id="prevSsHome">HOME SS</div></div>
            </div>
            
            <span style="display:block;color:var(--accent);margin-bottom:5px;">2. WALLPAPERS (DOWNLOAD)</span>
            <div class="upload-grid">
                <div class="upload-area" onclick="document.getElementById('wallLockIn').click()"><div id="prevWallLock">LOCK WP</div></div>
                <div class="upload-area" onclick="document.getElementById('wallHomeIn').click()"><div id="prevWallHome">HOME WP</div></div>
            </div>

            <input type="file" id="ssLockIn" accept="image/*" hidden onchange="handleImg(this, 'prevSsLock', true)">
            <input type="file" id="ssHomeIn" accept="image/*" hidden onchange="handleImg(this, 'prevSsHome', true)">
            <input type="file" id="wallLockIn" accept="image/*" hidden onchange="handleImg(this, 'prevWallLock', false)">
            <input type="file" id="wallHomeIn" accept="image/*" hidden onchange="handleImg(this, 'prevWallHome', false)">
            
            <input type="text" id="setupTitle" placeholder="SETUP TITLE" maxlength="15" style="margin-bottom: 10px;">
            <textarea id="setupDesc" placeholder="DETAILS (Like- Widgets, Icon Pack ,)" rows="2"></textarea>
            <button class="btn" onclick="submitSetup()" id="submitBtn">POST NOW</button>
        </div>

        <div id="setupGrid" class="setup-grid-container">
            <p style="text-align:center; opacity:0.3; margin-top:50px;">LOADING FEED...</p>
        </div>
    </div>
  </div>

  <div id="upScr" class="screen">
    <div class="modal">
      <button class="close-icon" onclick="closeScreen('upScr')">×</button>
      <h2>WEBSITE LOGS</h2>
      <div style="margin-top:20px;">
        <div class="up-box"><h4>COMMUNITY BOARD</h4><p>Now you can share feedback, ideas & suggestions.</p></div>
        <div class="up-box"><h4>NEW RINGTONE PLAYER</h4><p>Ad-free nonstop ringtones & background Playble.</p></div>
        <div class="up-box"><h4>NEW WALLPAPERS</h4><p>Added high-quality art works in the gallery.</p></div>
        <div class="up-box"><h4>SOFTWARE UPDATE</h4><p>Now supports all phones with latest NOS ZIPs.</p></div>
        <div class="up-box"><h4>SERVICE DATABASE</h4><p>Call or open maps directly, no more hassle.</p></div>
      </div>
    </div>
  </div>

  <div id="feedbackScr" class="screen">
    <div class="modal" style="height: 80dvh; display: flex; flex-direction: column;">
      <button class="close-icon" onclick="closeScreen('feedbackScr')">×</button>
      <h2>COMMUNITY BOARD</h2>
      <p style="opacity: 0.4; font-size: 0.8rem; margin-bottom: 15px;">PUBLIC FEEDBACK & CHAT</p>
      
      <div id="msgBoard" style="flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 15px; scroll-behavior: smooth;"></div>
      
      <div style="background: var(--card); border: 1px solid var(--border); border-radius: 30px; overflow: hidden; margin-top: 15px; position: sticky; bottom: 0;">
        
        <div id="replyBanner">
            <div class="reply-info">
                <span style="font-size:0.7rem; color:var(--accent); font-weight:bold;">REPLYING TO</span>
                <span id="replyText">User message...</span>
            </div>
            <button onclick="cancelReply()" class="close-reply-btn">×</button>
        </div>

        <div style="padding: 5px 5px 5px 15px; display: flex; align-items: center;">
            <img id="imgPreview" src="" onclick="clearImage()" title="Click to remove">
            
            <input type="text" id="userMsg" placeholder="SHARE SUGGESTION..." aria-label="Type Message" style="flex: 1; background: transparent; border: none; color: var(--text); outline: none; font-family: 'VT323' !important; font-size: 1.2rem;">
            
            <input type="file" id="imgInput" accept="image/*" style="display: none;" onchange="handleFileSelect()">
            
            <button id="imgUploadBtn" onclick="document.getElementById('imgInput').click()" style="width: 40px; height: 40px; border-radius: 50%; background: transparent; color: var(--text); border: none; cursor: pointer; margin-right: 5px; display: none;">
                <i class="fa-solid fa-image"></i>
            </button>

            <button id="sendBtn" onclick="sendMsg()" aria-label="Send Message" style="width: 45px; height: 45px; border-radius: 50%; background: var(--text); color: var(--bg); border: none; cursor: pointer; display: flex; justify-content: center; align-items: center;">
                <i class="fa-solid fa-arrow-up"></i>
            </button>
        </div>
      </div>
    </div>
  </div>

  <div id="musicScr" class="screen">
    <div class="modal">
      <button class="close-icon" onclick="handleMusicClose()">×</button>
      <h2>RINGTONE PLAYER</h2>
      <div class="music-ui">
        <div class="search-box-m">
          <input type="text" id="mQuery" placeholder="SEARCH SONG...">
          <button class="go-btn" id="mSearchBtn" onclick="searchMusic()"><i class="fa-solid fa-magnifying-glass"></i></button>
        </div>
      </div>
      <div id="music-card">
        <img src="" id="mArt" class="disc" alt="Album Art">
        <h3 id="mTitle" style="margin-top:15px;">TITLE</h3>
        <p id="mArtist" style="opacity:0.5;">ARTIST</p>
        <div class="m-ctrls">
          <i class="fa-solid fa-backward-step" onclick="prevSong()" style="cursor:pointer"></i>
          <span id="play-pause" onclick="togglePlay()" style="cursor:pointer"><i class="fa-solid fa-circle-play"></i></span>
          <i class="fa-solid fa-forward-step" onclick="nextSong()" style="cursor:pointer"></i>
        </div>
        <button class="btn" onclick="downloadCurrentSong()">DOWNLOAD</button>
      </div>
      <audio id="mPlayer" onended="nextSong()"></audio>
    </div>
  </div>

<div id="swScr" class="screen">
    <div class="modal">
      <button class="close-icon" onclick="closeScreen('swScr')">×</button>
      <h2>SYSTEM UPDATE</h2>
      <div class="guide-box">
        <div class="guide-header" onclick="toggleAccordion()">
          <span>HOW TO UPDATE?</span>
          <div class="arrow-wrapper" style="position:static;"><div class="dot-arrow"><div class="dot-row"><div class="dot"></div><div class="dot" style="visibility:hidden"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div></div></div></div>
        </div>
        <div class="guide-content" id="accContent">
          <p>1. DOWNLOAD THE BETA HUB TOOL APK.<br>2. CREATE "OTA" FOLDER IN INTERNAL STORAGE AND PASTE OTA ZIP INSIDE.<br>3. SETTING - SYSTEM - BETA HUB - IMPORT FILE - ZIP - UPDATE.</p>
          <button class="btn" style="font-size:1.6rem; padding:17px;"  onclick="runDownload(this, 'BETA_TOOL')"><div class="progress-bar"></div><span class="btn-text">DOWNLOAD BETA TOOL</span></button>
        </div>
      </div>

      <div class="sw-display" id="swDisplay">
        <div class="sw-img-box">
          <img src="" id="swPhoneImg" style="cursor: pointer;" alt="Phone Image" onmousedown="startSoftwareLogic()" ontouchstart="startSoftwareLogic()" onmouseup="cancelSoftwareLogic()" onmouseleave="cancelSoftwareLogic()" ontouchend="cancelSoftwareLogic()" ontouchmove="cancelSoftwareLogic()">
        </div>
        <div class="sw-info">
          <h2 id="swPhoneTitle">DEVICE</h2>
          <p style="opacity:0.5; font-size:0.9rem;">Official OTA Firmware</p>
        </div>
      </div>

      <div class="input-group">
        <div class="custom-select-trigger" onclick="openDeviceMenu()">
          <span id="deviceTriggerText">SELECT YOUR DEVICE</span>
          <div class="dot-arrow">
            <div class="dot-row"><div class="dot"></div><div class="dot" style="visibility:hidden"></div><div class="dot"></div></div>
            <div class="dot-row"><div class="dot"></div><div class="dot"></div></div>
            <div class="dot-row"><div class="dot"></div></div>
          </div>
        </div>
        <input type="hidden" id="swSelect" value=""> 
      </div>

      <div id="logBox" style="display:none;" class="detail-card">
        <h3>NOTES:</h3>
        <ul id="swList" style="margin:15px 0; opacity:0.7; list-style: inside; text-transform: none;"></ul>
        <button class="btn" onclick="runDownload(this, 'OTA_ZIP')"><div class="progress-bar"></div><span class="btn-text">DOWNLOAD OTA ZIP</span></button>
      </div>
    </div>
  </div>
  <div id="pgScr" class="screen">
    <div class="modal">
      <button class="close-icon" onclick="closeScreen('pgScr')">×</button>
      <h2>PLAYGROUND</h2>
      <div style="margin-top:20px;">
        <div class="pg-btn" onclick="openScreen('presetScr')"><span>CAMERA PRESETS</span><i class="fa-solid fa-camera"></i></div>
      </div>
    </div>
  </div>

  <div id="presetScr" class="screen">
    <div class="modal">
      <button class="close-icon" onclick="closeScreen('presetScr')">×</button>
      <h2>CAMERA PRESETS</h2>
      <p style="opacity:0.5; margin-bottom:10px;">EXCLUSIVE PRESETS</p>
      <div class="wp-grid" id="presetGrid"></div>
    </div>
  </div>

  <div id="wpScr" class="screen">
    <div class="modal">
      <button class="close-icon" onclick="closeScreen('wpScr')">×</button>
      <h2>GALLERY</h2>
      
      <div onclick="toggleAI()" style="background: var(--text); border: 1px solid var(--border); border-radius: 20px; padding: 16px; margin-bottom: 15px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
        <span style="color: var(--bg); font-weight: bold; font-size: 1.2rem;"> CREATE WITH AI</span>
        <i class="fa-solid fa-wand-magic-sparkles" style="color: var(--bg);"></i>
      </div>

      <div id="aiSection">
        <div class="input-group">
          <input type="text" id="aiPrompt" placeholder="DESCRIBE YOUR IDEA..." style="text-align: left;">
        </div>
        <div class="input-group">
          <select id="aiRatio">
            <option value="9:16">MOBILE (9:16)</option>
            <option value="16:9">PC (16:9)</option>
            <option value="1:1">SQUARE (1:1)</option>
          </select>
          <div class="arrow-wrapper"><div class="dot-arrow"><div class="dot-row"><div class="dot"></div><div class="dot" style="visibility:hidden"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div></div></div></div>
        </div>
        
        <button class="btn" id="genBtn" onclick="generateAIWall()"><div class="progress-bar"></div><span class="btn-text">GENERATE</span></button>
        
        <div id="aiResult" style="margin-top: 20px; display: none;">
          <div class="wp-card" style="height: 400px; border: 1px solid var(--border);">
            <img id="aiImg" src="" style="width: 100%; height: 100%; object-fit: cover;" alt="AI Result">
            <div class="wp-overlay">
              <button class="btn" onclick="downloadAIWall(this)"><div class="progress-bar"></div><span class="btn-text">DOWNLOAD</span></button>
            </div>
          </div>
        </div>
      </div>

      <div class="wp-grid" id="wallpaperGrid"></div>
    </div>
  </div>
  
  <div id="scScr" class="screen">
    <div class="modal">
      <button class="close-icon" onclick="closeScreen('scScr')">×</button>
      <h2>SERVICE CENTERS</h2>
      
      <div class="input-group" style="margin-top:20px;">
        <div class="custom-select-trigger" onclick="openStateMenu()">
          <span id="stateTriggerText">SELECT STATE</span>
          <div class="arrow-wrapper"><div class="dot-arrow"><div class="dot-row"><div class="dot"></div><div class="dot" style="visibility:hidden"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div></div></div></div>
        </div>
        <input type="hidden" id="state" value="">
      </div>

      <div class="input-group" id="cityGroup" style="display:none;">
        <div class="custom-select-trigger" onclick="openCityMenu()">
          <span id="cityTriggerText">SELECT CITY</span>
          <div class="arrow-wrapper"><div class="dot-arrow"><div class="dot-row"><div class="dot"></div><div class="dot" style="visibility:hidden"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div></div></div></div>
        </div>
        <input type="hidden" id="city" value="">
      </div>

      <div id="scInfo"></div>
    </div>
  </div>

      <div id="aboutScr" class="screen">
      <div class="modal">
        <span class="close-icon" onclick="closeScreen('aboutScr')">×</span>
        <h2>ABOUT US</h2>
        <p style="text-align:center; opacity:0.6; font-size:0.9rem; margin-bottom:15px; letter-spacing:1px;">ESTABLISHED 2026 • COMMUNITY DRIVEN</p>
        
        <div class="detail-card">
          <p>
            Welcome to <b>Nothing Space</b>. We are a dedicated open-source resource hub built for enthusiasts of the Nothing™ technology ecosystem. Our mission is to bridge the gap between complex developer resources and the average user.
          </p>
          
          <h3 style="margin-top:20px; font-size:1.2rem; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:5px;">OUR MISSION</h3>
          <p>
            To provide a safe, ad-free (pop-up free), and direct download environment for Firmware, wallpaper, Preset, and Tools. We believe in the "Right to Repair" and "Device Customization" philosophies.
          </p>

          <h3 style="margin-top:20px; font-size:1.2rem; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:5px;">EDITORIAL STANDARDS</h3>
          <p>
            Reliability is our core value. To ensure user safety, every file hosted on Nothing Space undergoes a strict 3-step verification process:
          </p>
          <ul style="margin-left:20px; opacity:0.8; list-style:square; margin-top:10px;">
            <li><b>Source Verification:</b> We only mirror links from official OTA servers (android.googleapis.com) or trusted developers.</li>
            <li><b>Security Scanning:</b> All APKs are scanned via VirusTotal APIs before listing to ensure 0% malware.</li>
            <li><b>Manual Testing:</b> Our internal team tests UI wallpaper, Preset on real hardware (Phone 1/2) to ensure stability.</li>
          </ul>

          <h3 style="margin-top:20px; font-size:1.2rem; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:5px;">THE TEAM</h3>
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:10px;">
                        <div style="background:rgba(255,255,255,0.05);border:1px solid var(--border);padding:10px; border-radius:10px; text-align:center;">
                <span style="font-size:0.8rem; opacity:0.6;">LEAD DEVELOPER</span><br><b>ROHIT KUMAR</b>
            </div>
            <div style="background:rgba(255,255,255,0.05);border:1px solid var(--border);padding:10px; border-radius:10px; text-align:center;">
                <span style="font-size:0.8rem; opacity:0.6;">HQ LOCATION</span><br><b>BIHAR, INDIA</b>
            </div>
          </div>
        </div>
      </div>
    </div>


    <div id="privacyScr" class="screen">
      <div class="modal">
        <span class="close-icon" onclick="closeScreen('privacyScr')">×</span>
        <h2>PRIVACY POLICY</h2>
        <div class="detail-card">
          <p style="font-size:0.9rem; opacity:0.6; margin-bottom:15px;">Last Updated: January 16, 2026</p>
          
          <p>At Nothing Space (accessible from nothingtools.github.io), safeguarding the privacy of our visitors is one of our primary objectives. This Privacy Policy document contains types of information that is collected and recorded by Nothing Space and how we use it.</p>

          <h3 style="margin-top:20px; font-size:1.1rem;">1. INFORMATION COLLECTION</h3>
          <p>
            <b>Personal Data:</b> We do not require you to create an account or provide personal details (like Name, Phone Number, Address) to access our downloads.<br>
            <b>Voluntary Data:</b> If you contact us via email, we will only use your email address to reply to your query. It will never be sold or shared.
          </p>

          <h3 style="margin-top:20px; font-size:1.1rem;">2. GOOGLE ADSENSE & COOKIES</h3>
          <p>We partner with Google AdSense to display advertisements. Google uses cookies, known as DART cookies, to serve ads to our site visitors based upon their visit to our site and other sites on the internet.</p>
          <div style="margin-top:10px; background:rgba(255,255,255,0.05); padding:10px; border-radius:10px; font-size:0.9rem;">
            <b>OPT-OUT:</b> You may choose to decline the use of DART cookies by visiting the Google Ad and Content Network Privacy Policy at <a href="https://policies.google.com/technologies/ads" target="_blank" style="text-decoration:underline;">policies.google.com</a>.
          </div>

          <h3 style="margin-top:20px; font-size:1.1rem;">3. GDPR DATA PROTECTION RIGHTS</h3>
          <p>We would like to make sure you are fully aware of all of your data protection rights. Every user is entitled to the following:</p>
          <ul style="margin-left:20px; opacity:0.8; list-style:circle; margin-top:5px;">
              <li>The right to access – You have the right to request copies of your personal data.</li>
              <li>The right to rectification – You have the right to request that we correct any information you believe is inaccurate.</li>
              <li>The right to erasure – You have the right to request that we erase your personal data, under certain conditions.</li>
          </ul>

          <h3 style="margin-top:20px; font-size:1.1rem;">4. CCPA PRIVACY RIGHTS</h3>
          <p>Under the CCPA, among other rights, California consumers have the right to request that a business that collects a consumer's personal data disclose the categories and specific pieces of personal data that a business has collected about consumers.</p>

          <h3 style="margin-top:20px; font-size:1.1rem;">5. LOG FILES</h3>
          <p>Nothing Space follows a standard procedure of using log files. The data collected includes internet protocol (IP) addresses, browser type, ISP, date/time stamp, and referring/exit pages. This information is used for analyzing trends and preventing DDoS attacks.</p>
        </div>
      </div>
    </div>

    <div id="termsScr" class="screen">
      <div class="modal">
        <span class="close-icon" onclick="closeScreen('termsScr')">×</span>
        <h2>TERMS OF USE</h2>
        <div class="detail-card">
          <p>By accessing this website, you confirm that you understand and agree to comply with these terms and conditions. Do not continue to use Nothing Space if you do not agree to all of the terms stated on this page.</p>

          <h3 style="margin-top:20px; font-size:1.1rem;">1. INTELLECTUAL PROPERTY</h3>
          <p>Unless otherwise stated, Nothing Space and/or its licensors own the intellectual property rights for all original material on this website. All intellectual property rights are reserved.</p>
          <ul style="margin-left:20px; opacity:0.8; list-style:square; margin-top:5px;">
            <li>You must not republish material from Nothing Space.</li>
            <li>You must not sell, rent, or sub-license material from Nothing Space.</li>
            <li>You must not reproduce, duplicate or copy material from Nothing Space without permission.</li>
          </ul>

          <h3 style="margin-top:20px; font-size:1.1rem;">2. LIMITATION OF LIABILITY</h3>
          <p>The content and tools on Nothing Space are provided "as is". We make no warranties, expressed or implied.</p>
          <p style="margin-top:10px;">
            <b>Device Safety:</b> The firmware links, APKs, and guides provided are for educational and customization purposes. Modifying system software (Flashing OTA, Unlocking Bootloader) carries inherent risks. Nothing Space and its developers are <b>NOT responsible</b> for any damage to your device, data loss, or voiding of warranty. Always backup your data.
          </p>

          <h3 style="margin-top:20px; font-size:1.1rem;">3. GOVERNING LAW</h3>
          <p>These terms and conditions are governed by and construed in accordance with the laws of <b>India</b>. You irrevocably submit to the exclusive jurisdiction of the courts in the State of <b>Bihar</b> for the resolution of any disputes.</p>
        </div>
      </div>
    </div>

    <div id="disclaimerScr" class="screen">
      <div class="modal">
        <span class="close-icon" onclick="closeScreen('disclaimerScr')">×</span>
        <h2>LEGAL DISCLAIMER</h2>
        <div class="detail-card">
          
          <div style="border: 2px solid var(--text); padding: 15px; border-radius: 15px; margin-bottom: 20px; background: rgba(255,255,255,0.05);">
            <p style="margin:0; font-weight:bold; font-size:1.1rem; text-align:center;">
                ⚠ UNOFFICIAL FAN PROJECT
            </p>
            <p style="margin-top:10px; font-size:0.95rem;">
               Nothing Space is an independent, community-run resource hub. We are <u>NOT</u> affiliated, associated, authorized, endorsed by, or in any way officially connected with <b>Nothing Technology Limited</b>, CMF, or any of their subsidiaries.
            </p>
          </div>

          <h3 style="font-size:1.1rem;">TRADEMARKS</h3>
          <p>
            The names "Nothing", "Phone (1)", "Phone (2)", "Phone (2a)", "CMF" and related marks, emblems, and images are registered trademarks of their respective owners. We use these names solely for descriptive purposes to identify the devices our resources are intended for. This constitutes <b>"Fair Use"</b> under copyright law.
          </p>

          <h3 style="margin-top:20px; font-size:1.1rem;">CONTENT ACCURACY</h3>
          <p>
            While we strive to keep the information up to date and correct, we make no representations or warranties of any kind about the completeness, accuracy, reliability, suitability or availability with respect to the website or the information contained on the website.
          </p>
        </div>
      </div>
    </div>

    <div id="contactScr" class="screen">
      <div class="modal">
        <span class="close-icon" onclick="closeScreen('contactScr')">×</span>
        <h2>GET IN TOUCH</h2>
        <div class="detail-card">
          <p style="text-align:center; margin-bottom:20px;">Have a suggestion for the site, found a broken link, or have a DMCA request? Choose a method below.</p>
          
          <div style="background:rgba(0, 136, 204, 0.1); border:1px solid #0088cc; padding:15px; border-radius:15px; text-align:center; margin-bottom:15px;">
            <i class="fa-brands fa-telegram" style="font-size:2.5rem; color:#0088cc; display:block; margin-bottom:5px;"></i>
            <p style="opacity:0.6; margin-bottom:5px; font-size:0.8rem;">JOIN OUR COMMUNITY CHANNEL</p>
            <a href="https://t.me/AskRohit_bot" target="_blank" style="color:#fff; background:#0088cc; padding:8px 15px; border-radius:5px; text-decoration:none; font-weight:bold; display:inline-block;">OPEN TELEGRAM <i class="fa-solid fa-arrow-up-right-from-square"></i></a>
          </div>

          <div style="background:rgba(255,255,255,0.05); border:1px solid var(--border); padding:15px; border-radius:15px; text-align:center;">
            <i class="fa-solid fa-envelope" style="font-size:1.5rem; display:block; margin-bottom:5px;"></i>
            <p style="opacity:0.6; margin-bottom:5px; font-size:0.8rem;">OFFICIAL SUPPORT EMAIL</p>
            <a href="mailto:rkkiller298@gmail.com" style="color:var(--text); text-decoration:underline; font-size:1.2rem;">rkkiller298@gmail.com</a>
          </div>

          <h3 style="margin-top:20px; font-size:1.1rem; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:5px;">OPERATIONAL DETAILS</h3>
          <ul style="margin-left:20px; opacity:0.8; list-style:square; margin-top:10px;">
            <li><b>Response Time:</b> Within 24-48 Hours</li>
            <li><b>Region:</b> Bihar, India</li>
            <li><b>Legal Contact:</b> Use the email above for takedown requests.</li>
          </ul>
        </div>
      </div>
    </div>

    <footer>
        <div class="footer-links">
          <a href="javascript:void(0)" onclick="openScreen('aboutScr')">ABOUT</a>
          <a href="javascript:void(0)" onclick="openScreen('privacyScr')">PRIVACY</a>
          <a href="javascript:void(0)" onclick="openScreen('termsScr')">TERMS</a>
          <a href="javascript:void(0)" onclick="openScreen('disclaimerScr')">DISCLAIMER</a>
          <a href="javascript:void(0)" onclick="openScreen('contactScr')">CONTACT</a>
        </div>
            <p class="disclaimer">
                <strong>Disclaimer:</strong> Nothing Space is an independent community project and is NOT affiliated, associated, authorized, endorsed by, or in any way officially connected with Nothing Technology Ltd or its subsidiaries. "Nothing" and related names are registered trademarks of their respective owners.
            </p>
            <p style="margin-top: 20px; font-size: 0.8rem; color: var(--text-sec);">© 2026 Nothing Space. Designed in India.</p>
        </div>
           </footer>
  <script>
    /* ================= CONFIG & GLOBALS ================= */
    const CONFIG = {
        BETA_TOOL_URL: "https://github.com/nothingcommunity/Testing/raw/refs/heads/main/Apps/Beta%20Updates%20Hub.apk",
        SOFTWARE: {}, SERVICE_DB: {}, WALLPAPERS: []
    };
    const DB_URL = "https://nothingcommunity-7664f-default-rtdb.firebaseio.com/chat.json";
    const SETUP_DB_URL = "https://nothingcommunity-7664f-default-rtdb.firebaseio.com/setups.json";
    const ADMIN_UUID = "uid_mkkuzv0gqnf16fsd3fe";
    
    let SERVICE_DB = {}; 
    let currentPlaylist = [], currentIndex = 0, lastPlayedArt = "";
    let imgStore = { ssHome: null, ssLock: null, wallHome: null, wallLock: null };
    let currentReply = null; 

    // ================= INITIALIZATION =================
    window.addEventListener('load', () => {
        applyAutoTheme();
        createStars(); 
        createMoon();
        checkVerifyStatus(); 
        setTimeout(() => { initSoftwareData(); initServiceData(); loadMessages(); }, 100);
    });

    /* ================= THEME & UI ================= */
    function applyAutoTheme() {
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        document.documentElement.setAttribute('data-theme', prefersDark ? 'dark' : 'light');
        updateThemeIcon(prefersDark ? 'dark' : 'light');
    }
    function toggleTheme() {
        const root = document.documentElement;
        const newTheme = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        root.setAttribute('data-theme', newTheme);
        updateThemeIcon(newTheme);
    }
    function updateThemeIcon(theme) { document.getElementById('t-icon').className = theme === 'dark' ? "fa-solid fa-circle" : "fa-solid fa-sun"; }

    function createStars() {
        requestAnimationFrame(() => {
            const field = document.getElementById('starField'); field.innerHTML = ''; const fragment = document.createDocumentFragment();
            const count = window.innerWidth < 768 ? 80 : 250; 
            for(let i=0; i < count; i++) {
                const s = document.createElement('div'); s.className = 'star';
                const size = Math.random() * 3;
                s.style.cssText = `width:${size}px; height:${size}px; top:${Math.random()*100}%; left:${Math.random()*100}%; animation: blink ${2+Math.random()*3}s infinite; opacity:${Math.random()}`;
                fragment.appendChild(s);
            }
            field.appendChild(fragment);
        });
    }
    function createMoon() { if(!document.querySelector('.moon')) { const moon = document.createElement('div'); moon.className = 'moon'; document.body.appendChild(moon); } }

    function attachScrollAnimation() {
        const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.remove('hidden-state'); entry.target.classList.add('scroll-active'); observer.unobserve(entry.target); } }); }, { threshold: 0.1 });
        document.querySelectorAll('.wp-card').forEach(card => { card.classList.add('hidden-state'); observer.observe(card); });
    }

    /* ================= NAVIGATION ================= */
    function openScreen(id) {
        const s = document.getElementById(id); if (!s) return;
        s.style.display = 'flex'; setTimeout(() => { s.classList.add('active'); }, 10);
        if(id === 'wpScr') initWallpaperData();
        if(id === 'presetScr') initPresetData();
        if(id === 'setupScr') loadSetups();
    }

    function closeScreen(id) {
        const s = document.getElementById(id); if (!s) return;
        s.classList.remove('active'); 
        setTimeout(() => { s.style.display = 'none'; if(id === 'wpScr') { const aiSec = document.getElementById('aiSection'); if(aiSec) aiSec.style.display = 'none'; } }, 400);
    }
    function toggleAI() { const section = document.getElementById('aiSection'); section.style.display = (section.style.display === 'none') ? 'block' : 'none'; }
    function toggleUpload() { const f = document.getElementById('setupUploadForm'); f.style.display = (f.style.display === 'none') ? 'block' : 'none'; }

    /* ================= CUSTOM SELECTOR LOGIC ================= */
    function openDeviceMenu() {
        const devices = [
            { name: "Nothing PHONE (1)", val: "p1" }, { name: "Nothing PHONE (2)", val: "p2" }, { name: "Nothing PHONE (2A)", val: "p2a" },
            { name: "Nothing PHONE (2A) PLUS", val: "p2aplus" }, { name: "Nothing PHONE (3)", val: "p3" }, { name: "Nothing PHONE (3A)", val: "p3a" },
            { name: "Nothing PHONE (3A) PRO", val: "p3apro" }, { name: "Nothing PHONE (3A) LITE", val: "p3alite" }, { name: "CMF PHONE 1", val: "cmf1" }, { name: "CMF PHONE 2 PRO", val: "cmf2pro" }
        ];
        openUniversalSelector("CHOOSE DEVICE", devices, (selected) => {
            document.getElementById('swSelect').value = selected.val;
            document.getElementById('deviceTriggerText').innerText = selected.name;
            showLogs(); 
        });
    }

    function openStateMenu() {
        const states = ["ANDHRA PRADESH", "ASSAM", "BIHAR", "CHANDIGARH", "CHHATTISGARH", "DELHI", "GOA", "GUJARAT", "HARYANA", "HIMACHAL PRADESH", "JAMMU & KASHMIR", "JHARKHAND", "KARNATAKA", "KERALA", "MADHYA PRADESH", "MAHARASHTRA", "MEGHALAYA", "NAGALAND", "ODISHA", "PUDUCHERRY", "PUNJAB", "RAJASTHAN", "TAMIL NADU", "TELANGANA", "TRIPURA", "UTTAR PRADESH", "UTTARAKHAND", "WEST BENGAL"].map(s => ({ name: s, val: s }));
        openUniversalSelector("SELECT STATE", states, (selected) => {
            document.getElementById('state').value = selected.val;
            document.getElementById('stateTriggerText').innerText = selected.name;
            document.getElementById('city').value = ""; document.getElementById('cityTriggerText').innerText = "SELECT CITY"; document.getElementById('scInfo').innerHTML = "";
            loadCitiesCustom(); 
        });
    }

    function openCityMenu() {
        const s = document.getElementById('state').value; if(!s || !SERVICE_DB[s]) return;
        const rawCities = [...new Set(Object.keys(SERVICE_DB[s]).map(c => c.split('_')[0]))].sort();
        const cityList = rawCities.map(c => ({ name: c, val: c }));
        openUniversalSelector("SELECT CITY", cityList, (selected) => {
            document.getElementById('city').value = selected.val;
            document.getElementById('cityTriggerText').innerText = selected.name;
            showDetails(); 
        });
    }
    function loadCitiesCustom() { const s = document.getElementById('state').value; document.getElementById('cityGroup').style.display = (!s || !SERVICE_DB[s]) ? 'none' : 'block'; }

    function openUniversalSelector(title, items, callback) {
        const titleEl = document.getElementById('selectorTitle'); const listEl = document.getElementById('selectorList');
        titleEl.innerText = title; listEl.innerHTML = "";
        items.forEach(item => {
            const div = document.createElement('div'); div.className = "selector-item";
            div.innerHTML = `<span>${item.name}</span> <i class="fa-solid fa-arrow-right" style="font-size:0.8rem; opacity:0.5;"></i>`;
            div.onclick = () => { if(navigator.vibrate) navigator.vibrate(30); callback(item); closeScreen('selectorScr'); };
            listEl.appendChild(div);
        });
        openScreen('selectorScr');
    }

    /* ================= DOWNLOAD LOGIC ================= */
    async function runDownload(btn, input) {
        const bar = btn.querySelector('.progress-bar'); const txt = btn.querySelector('.btn-text'); const oldTxt = txt.innerText; let finalUrl = "";
        if (input === 'BETA_TOOL') finalUrl = CONFIG.BETA_TOOL_URL;
        else if (input === 'OTA_ZIP') { const device = document.getElementById('swSelect').value; if(!device) { alert("PLEASE SELECT A DEVICE!"); return; } finalUrl = CONFIG.SOFTWARE[device]?.url; } 
        else finalUrl = input;
        if (!finalUrl || finalUrl === "#") { alert("LINK NOT FOUND!"); return; }
        btn.style.pointerEvents = 'none'; txt.innerText = 'PROCESSING...'; bar.style.transition = 'width 1.5s linear'; bar.style.width = '100%';
        const isZip = finalUrl.toLowerCase().endsWith('.zip') || finalUrl.toLowerCase().endsWith('.apk');
        if (isZip) {
            setTimeout(() => { const link = document.createElement('a'); link.href = finalUrl; link.target = "_blank"; document.body.appendChild(link); link.click(); document.body.removeChild(link); finishDownload(btn, txt, bar, oldTxt); }, 1000);
        } else {
            try {
                const response = await fetch(finalUrl); const blob = await response.blob(); const blobUrl = window.URL.createObjectURL(blob); const link = document.createElement('a'); link.href = blobUrl; link.download = "NothingSpace_" + Date.now() + ".png"; document.body.appendChild(link); link.click(); document.body.removeChild(link); window.URL.revokeObjectURL(blobUrl); finishDownload(btn, txt, bar, oldTxt);
            } catch (err) { window.open(finalUrl, '_blank'); finishDownload(btn, txt, bar, oldTxt); }
        }
    }
    function finishDownload(btn, txt, bar, oldTxt) { txt.innerText = "DONE ✓"; setTimeout(() => { bar.style.transition = 'none'; bar.style.width = '0%'; txt.innerText = oldTxt; btn.style.pointerEvents = 'all'; }, 1000); }

    /* ================= SOFTWARE & SERVICE DATA ================= */
    async function initSoftwareData() { try { const response = await fetch("https://nothingsoftware-3cc7c-default-rtdb.firebaseio.com/software_data.json"); const data = await response.json(); if (data) CONFIG.SOFTWARE = data; } catch (err) { console.error("SW Error:", err); } }
    function showLogs() {
        const m = document.getElementById('swSelect').value; const box = document.getElementById('logBox'), disp = document.getElementById('swDisplay');
        if(!m || !CONFIG.SOFTWARE[m]) { box.style.display = 'none'; disp.style.display = 'none'; return; }
        const data = CONFIG.SOFTWARE[m]; document.getElementById('swPhoneImg').src = data.img; document.getElementById('swPhoneTitle').innerText = data.disp;
        disp.style.display = 'flex'; document.getElementById('swList').innerHTML = (data.logs && Array.isArray(data.logs)) ? data.logs.map(l => `<li>${l}</li>`).join('') : "<li>Details not available</li>"; box.style.display = 'block';
    }
    function toggleAccordion() { document.getElementById('accContent').classList.toggle('open'); }
    async function initServiceData() { try { const response = await fetch("https://raw.githubusercontent.com/nothingcommunity/Testing/main/Service%20Centre/service_centre.json"); SERVICE_DB = await response.json(); } catch (err) { console.error("Service Data Error"); } }
    function showDetails() {
        const s = document.getElementById('state').value, c = document.getElementById('city').value, scInfo = document.getElementById('scInfo');
        if(!c || !SERVICE_DB[s]) return; scInfo.innerHTML = ''; 
        Object.keys(SERVICE_DB[s]).filter(key => key === c || key.startsWith(c + "_")).forEach(key => {
            const d = SERVICE_DB[s][key]; 
            scInfo.innerHTML += `<div class="detail-card"><div style="display:flex;justify-content:space-between;margin-bottom:10px;"><h3 style="font-size:1.4rem;">${d.n}</h3><span class="sc-badge">ID: ${d.c}</span></div><p style="text-transform:none;opacity:0.7;font-size:1rem;margin-bottom:15px;"><span style="font-size:1.2rem;">${d.a}</p><div style="font-size:0.9rem;margin-bottom:15px;"><p>🕒 TIME: ${d.t}</p><p>🚫 OFF : ${d.o}</p></div><div class="card-row"><button class="btn" style="flex:1;padding:12px;" onclick="window.open('tel:${d.p}')">CALL</button><button class="btn" style="flex:1;padding:12px;" onclick="window.open('${d.m}')">MAPS</button></div></div>`;
        });
    }
    let sw_timer; function startSoftwareLogic() { sw_timer = setTimeout(() => { if(navigator.vibrate) navigator.vibrate(50); openSoftwareMenu(); }, 500); }
    function cancelSoftwareLogic() { clearTimeout(sw_timer); }
    async function openSoftwareMenu() {
        // ADMIN CHECK FOR SOFTWARE TRIGGER
        if(userUUID !== ADMIN_UUID) return; 

        const id = document.getElementById('swSelect').value; const pass = prompt("🔐 SOFTWARE ADMIN PASSWORD:");
        if(stringToHash(pass) === "1540218401") {
            if(!id) { if(confirm("🆕 ADD NEW DEVICE?")) { const newId = prompt("Unique ID:"); if(!newId) return; const payload = { disp: prompt("Name:"), img: prompt("Img URL:"), url: prompt("Zip Link:"), logs: [prompt("Note:")] }; await fetch(`https://nothingsoftware-3cc7c-default-rtdb.firebaseio.com/software_data/${newId}.json`, {method:'PUT', body:JSON.stringify(payload)}); alert("ADDED!"); initSoftwareData(); } return; }
            const cur = CONFIG.SOFTWARE[id]; const choice = prompt(`EDIT ${cur.disp}:\n1.LINK\n2.NAME\n3.IMG\n4.NOTE`); let load = {};
            if(choice==="1") load={url:prompt("URL:", "")}; if(choice==="2") load={disp:prompt("NAME:", "")}; if(choice==="3") load={img:prompt("IMG:", "")};
            if(choice==="4") { const raw = prompt("NOTE (| for new line):", ""); if(raw) load={logs: raw.split('|').map(s=>s.trim())}; }
            if(Object.keys(load).length) { await fetch(`https://nothingsoftware-3cc7c-default-rtdb.firebaseio.com/software_data/${id}.json`, {method:'PATCH', body:JSON.stringify(load)}); alert("SAVED!"); initSoftwareData(); showLogs(); }
        } else { if(pass) alert("WRONG PASSWORD"); }
    }

    /* ================= MUSIC MODULE ================= */
    async function searchMusic() {
        const query = document.getElementById('mQuery').value; const btn = document.getElementById('mSearchBtn'); const card = document.getElementById('music-card');
        if (!query) return; const originalBtn = btn.innerHTML; btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i>';
        try {
            const _0x1 = "aHR0cHM6Ly9pdHVuZXMuYXBwbGUuY29tL3NlYXJjaD9saW1pdD0yNTAmZW50aXR5PXNvbmcmdGVybT0="; 
            const res = await fetch(`${atob(_0x1)}${encodeURIComponent(query)}`); 
            const data = await res.json();
            if (data.results.length > 0) { 
                currentPlaylist = data.results.map(song => ({ 
                    url: song.previewUrl, 
                    art: song.artworkUrl100.replace('100x100', '400x400'), 
                    title: song.trackName.replace(/mzaf_\d+/g, "Nothing TRACK").toUpperCase(), 
                    artist: song.artistName
                })); 
                currentIndex = 0; card.style.display = "block"; loadSong(0); 
            } else alert("Nothing FOUND");
        } catch (e) { console.error(e); } finally { btn.innerHTML = originalBtn; }
    }

    function loadSong(index) {
        if (!currentPlaylist[index]) return; const song = currentPlaylist[index]; const player = document.getElementById('mPlayer');
        document.getElementById('mArt').src = song.art; document.getElementById('mTitle').innerText = song.title; document.getElementById('mArtist').innerText = song.artist; lastPlayedArt = song.art; if(document.getElementById('mini-art')) document.getElementById('mini-art').src = lastPlayedArt; 
        player.src = song.url; player.load(); togglePlay(true);
        if ('mediaSession' in navigator) { navigator.mediaSession.metadata = new MediaMetadata({ title: song.title, artist: song.artist, album: "Nothing Space", artwork: [{ src: song.art, sizes: '512x512', type: 'image/jpeg' }] }); navigator.mediaSession.setActionHandler('play', function() { togglePlay(true); }); navigator.mediaSession.setActionHandler('pause', function() { togglePlay(false); }); navigator.mediaSession.setActionHandler('previoustrack', prevSong); navigator.mediaSession.setActionHandler('nexttrack', nextSong); }
    }

    function togglePlay(forcePlay = false) {
        const player = document.getElementById('mPlayer'); const icon = document.querySelector('#play-pause i'); const art = document.getElementById('mArt');
        if (player.paused || forcePlay) { player.play().catch(()=>{}); icon.className = "fa-solid fa-circle-pause"; art.classList.add('spinning'); if('mediaSession' in navigator) navigator.mediaSession.playbackState = "playing"; } 
        else { player.pause(); icon.className = "fa-solid fa-circle-play"; art.classList.remove('spinning'); if('mediaSession' in navigator) navigator.mediaSession.playbackState = "paused"; }
    }

    function nextSong() { if(currentPlaylist.length) { currentIndex = (currentIndex + 1) % currentPlaylist.length; loadSong(currentIndex); } }
    function prevSong() { if(currentPlaylist.length) { currentIndex = (currentIndex - 1 + currentPlaylist.length) % currentPlaylist.length; loadSong(currentIndex); } }
    function handleMusicClose() { closeScreen('musicScr'); if (!document.getElementById('mPlayer').paused) { document.getElementById('mini-player').style.display = 'block'; document.getElementById('mini-art').src = lastPlayedArt; document.getElementById('mini-art').classList.add('spinning'); } }
    function restorePlayer() { document.getElementById('mini-player').style.display = 'none'; openScreen('musicScr'); }

    async function downloadCurrentSong() {
        const song = currentPlaylist[currentIndex]; const btn = document.querySelector('#music-card .btn'); if(!song) return; btn.style.pointerEvents = "none"; btn.innerText = "FETCHING...";
        try { const response = await fetch(song.url); const blob = await response.blob(); const url = window.URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = `${song.title.replace(/[^a-zA-Z0-9\s]/g, '').trim()} - NothingSpace.mp3`; document.body.appendChild(a); a.click(); document.body.removeChild(a); window.URL.revokeObjectURL(url); btn.innerText = "DONE ✓"; } catch (e) { window.open(song.url, '_blank'); btn.innerText = "OPENED"; } setTimeout(() => { btn.innerText = "DOWNLOAD"; btn.style.pointerEvents = "all"; }, 2000); 
    }

    /* ================= SETUP/LAYOUTS MODULE ================= */
    function handleImg(input, prevId, isScreen) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.src = e.target.result;
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    const maxWidth = isScreen ? 400 : 1080; 
                    const scale = maxWidth / img.width;
                    canvas.width = maxWidth;
                    canvas.height = img.height * scale;
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    const res = canvas.toDataURL('image/jpeg', 0.7);
                    
                    if(prevId === 'prevSsLock') imgStore.ssLock = res;
                    if(prevId === 'prevSsHome') imgStore.ssHome = res;
                    if(prevId === 'prevWallLock') imgStore.wallLock = res;
                    if(prevId === 'prevWallHome') imgStore.wallHome = res;

                    document.getElementById(prevId).innerHTML = `<img src="${res}" style="width:100%; height:100%; object-fit:contain;">`;
                }
            }
            reader.readAsDataURL(input.files[0]);
        }
    }

    async function submitSetup() {
        const title = document.getElementById('setupTitle').value;
        const btn = document.getElementById('submitBtn');

        if(!title || !imgStore.ssLock || !imgStore.ssHome || !imgStore.wallLock || !imgStore.wallHome) {
            alert("ERROR: Please upload all 4 required images (Home/Lock Screenshots & Wallpapers)!");
            return;
        }

        if (!savedName || savedName === "USER") {
            let enterName = prompt("ENTER YOUR NAME");
            if (!enterName || enterName.trim() === "") return; 
            savedName = enterName.trim().toUpperCase();
            localStorage.setItem('ns_user_fixed', savedName); 
        }

        btn.innerText = "UPLOADING..."; btn.style.pointerEvents = "none";

        const data = {
            title: title.toUpperCase(),
            desc: document.getElementById('setupDesc').value,
            ssLock: imgStore.ssLock,
            ssHome: imgStore.ssHome, 
            wallLock: imgStore.wallLock,
            wallHome: imgStore.wallHome,
            likes: 0,
            uuid: userUUID,
            author: savedName,
            date: Date.now()
        };

        try {
            await fetch(SETUP_DB_URL, { method: 'POST', body: JSON.stringify(data) });
            alert("UPLOADED! 🎉"); location.reload();
        } catch(e) {
            alert("FAIL"); btn.innerText = "RETRY"; btn.style.pointerEvents = "all";
        }
    }

    /* --- UPDATED SETUP LOADING WITH 3D EFFECT & DELETE LOGIC --- */
    async function loadSetups() {
        const grid = document.getElementById('setupGrid');
        const modal = document.querySelector('#setupScr .modal'); 

        try {
            const res = await fetch(SETUP_DB_URL);
            const data = await res.json();
            
            if(!data) { 
                grid.innerHTML = "<p style='text-align:center'>NO SETUPS YET</p>"; 
                return; 
            }
            
            const list = Object.keys(data).map(k => ({id:k, ...data[k]}));
            list.sort((a,b) => (b.likes||0) - (a.likes||0)); 

            grid.innerHTML = list.map(p => {
                const isMine = p.uuid === userUUID;
                const isAdmin = userUUID === ADMIN_UUID;
                const liked = localStorage.getItem('l_'+p.id) ? 'liked' : '';
                const displayName = p.author ? p.author : (isMine ? 'YOU' : 'USER');

                // Logic: Show delete if it is mine OR I am Admin
                const showDelete = isMine || isAdmin; 

                return `
                <div class="setup-card">
                    <div class="setup-header">
                        <h3>${p.title}</h3>
                        <span style="opacity:0.5; font-size:0.8rem; border:1px solid #333; padding:2px 6px; border-radius:4px;">${displayName}</span>
                    </div>
                    <div class="phone-showcase">
                        <div class="phone-frame" onclick="selectFrame(this, '${p.wallHome}', '${p.title}_LOCK')">
                            <img src="${p.ssHome}">
                        </div>
                        ${p.ssLock ? `<div class="phone-frame" onclick="selectFrame(this, '${p.wallLock}', '${p.title}_HOME')"><img src="${p.ssLock}"></div>` : ''}
                    </div>
                    <button class="dl-btn">DOWNLOAD WALLPAPER</button>
                    <p style="margin:15px 0 10px; opacity:0.8; font-size:0.9rem;">${p.desc || ''}</p>
                    <div style="display:flex; justify-content:space-between; align-items:center; border-top:1px solid #222; padding-top:15px;">
                        <button class="like-btn ${liked}" onclick="doLike('${p.id}', ${p.likes||0}, this)">
                            <i class="fa-solid fa-heart"></i> <span>${p.likes||0}</span>
                        </button>
                        
                        ${showDelete ? `
                            <div onclick="deleteSetup('${p.id}', '${p.uuid}')" style="cursor:pointer; padding:8px; background:rgba(255,0,0,0.1); border-radius:8px;">
                                <i class="fa-solid fa-trash" style="color:#ff4444;"></i>
                            </div>` 
                        : ''}
                    </div>
                </div>`;
            }).join('');

            // Attach the 3D Scroll Effect
            setTimeout(() => {
                attachFocusScroll(modal);
            }, 200);

        } catch(e) { 
            console.error(e);
            grid.innerHTML = "<p style='text-align:center'>ERROR LOADING</p>"; 
        }
    }

    /* --- NEW 3D SCROLL EFFECT LOGIC (Fade + Shrink) --- */
    function attachFocusScroll(modal) {
        if(!modal) return;

        const handleScroll = () => {
            const cards = document.querySelectorAll('.setup-card');
            const modalCenter = modal.getBoundingClientRect().top + (modal.clientHeight / 2);

            cards.forEach(card => {
                const rect = card.getBoundingClientRect();
                const cardCenter = rect.top + (rect.height / 2);
                const dist = Math.abs(modalCenter - cardCenter);
                
                // If card is near center (200px range), focus it. Else shrink it.
                if (dist < 200) {
                    card.classList.add('in-focus');
                } else {
                    card.classList.remove('in-focus');
                }
            });
        };

        modal.removeEventListener('scroll', handleScroll); 
        modal.addEventListener('scroll', handleScroll);
        
        // Initial Check
        handleScroll();
    }

    async function deleteSetup(id, postUUID) {
        const isMine = postUUID === userUUID;
        const isAdmin = userUUID === ADMIN_UUID;

        if (isAdmin) {
             // Admin Logic: Needs Password
             const pass = prompt("ADMIN PASSWORD:");
             if (stringToHash(pass) === "1540218370") {
                await performDelete(id);
             } else {
                alert("WRONG PASSWORD");
             }
        } else if (isMine) {
            // User Logic: Simple Confirm
            if(confirm("DELETE YOUR SETUP?")) {
                await performDelete(id);
            }
        }
    }

    async function performDelete(id) {
        try {
            await fetch(`https://nothingcommunity-7664f-default-rtdb.firebaseio.com/setups/${id}.json`, { method: 'DELETE' });
            alert("DELETED!"); loadSetups();
        } catch(e) { alert("ERROR"); }
    }

    function selectFrame(frame, wallUrl, name) {
        const wasActive = frame.classList.contains('active');
        document.querySelectorAll('.phone-frame').forEach(f => f.classList.remove('active'));
        document.querySelectorAll('.dl-btn').forEach(b => b.style.display = 'none');
        if (!wasActive) {
            frame.classList.add('active');
            const card = frame.closest('.setup-card');
            const btn = card.querySelector('.dl-btn');
            if(btn) {
                btn.style.display = 'block';
                btn.onclick = () => {
                    const a = document.createElement('a'); a.href = wallUrl; a.download = name+".jpg";
                    document.body.appendChild(a); a.click(); document.body.removeChild(a);
                };
            }
        }
    }

    async function doLike(id, n, btn) {
        if(localStorage.getItem('l_'+id)) return;
        localStorage.setItem('l_'+id, '1');
        btn.classList.add('liked');
        btn.querySelector('span').innerText = n+1;
        await fetch(`https://nothingcommunity-7664f-default-rtdb.firebaseio.com/setups/${id}.json`, { 
            method:'PATCH', body:JSON.stringify({likes:n+1}) 
        });
    }

    /* ================= CHAT MODULE ================= */
    let userUUID = localStorage.getItem('ns_user_uuid');
    if (!userUUID) { userUUID = 'uid_' + Date.now().toString(36) + Math.random().toString(36).substr(2); localStorage.setItem('ns_user_uuid', userUUID); }
    let savedName = localStorage.getItem('ns_user_fixed') || "";
    let selectedImgBase64 = "";

    async function checkVerifyStatus() {
        try {
            const res = await fetch("https://nothingcommunity-7664f-default-rtdb.firebaseio.com/verified_users.json");
            const v = await res.json() || {};
            if(v[userUUID] === true) {
                document.getElementById('imgUploadBtn').style.display = 'block';
            } else {
                document.getElementById('imgUploadBtn').style.display = 'none';
            }
        } catch(e) {}
    }

    function handleFileSelect() {
        const fileInput = document.getElementById('imgInput');
        const file = fileInput.files[0];
        if (!file) return;

        fetch("https://nothingcommunity-7664f-default-rtdb.firebaseio.com/verified_users.json")
        .then(res => res.json())
        .then(verifiedList => {
            verifiedList = verifiedList || {};
            if (verifiedList[userUUID] !== true) {
                alert("🔒 ONLY VERIFIED USERS CAN SEND PHOTOS.");
                fileInput.value = "";
                return;
            }
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.src = e.target.result;
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const MAX_WIDTH = 800; 
                    const scaleSize = MAX_WIDTH / img.width;
                    canvas.width = MAX_WIDTH;
                    canvas.height = img.height * scaleSize;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    selectedImgBase64 = canvas.toDataURL('image/jpeg', 0.7); 
                    const preview = document.getElementById('imgPreview');
                    preview.src = selectedImgBase64;
                    preview.style.display = 'block';
                }
            };
            reader.readAsDataURL(file);
        })
        .catch(() => {
            alert("ERROR CHECKING PERMISSIONS");
            fileInput.value = "";
        });
    }
    function clearImage() { document.getElementById('imgInput').value = ""; document.getElementById('imgPreview').style.display = 'none'; selectedImgBase64 = ""; }
    
    // NEW REPLY FUNCTIONS
    function initReply(id, name, text) {
        currentReply = { id: id, name: name, text: text };
        document.getElementById('replyBanner').style.display = 'flex';
        document.getElementById('replyText').innerText = name + ": " + text;
        document.getElementById('userMsg').focus();
    }

    function cancelReply() {
        currentReply = null;
        document.getElementById('replyBanner').style.display = 'none';
    }

    // SCROLL TO MSG FUNCTION
    function scrollToMsg(id) {
        const target = document.getElementById(`msg-${id}`);
        if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'center' });
            target.style.transition = "background 0.5s ease";
            const originalBg = target.style.background;
            target.style.background = "rgba(255, 0, 0, 0.2)"; 
            setTimeout(() => { target.style.background = originalBg; }, 1000);
        } else {
            alert("Message not found (might be deleted or not loaded).");
        }
    }

    async function sendMsg() {
        const input = document.getElementById('userMsg'); const btn = document.getElementById('sendBtn'); 
        let msg = input.value.trim();
        
        if (!msg && !selectedImgBase64) return;
        if (msg === "/reset") { localStorage.removeItem('ns_user_fixed'); savedName = ""; alert("NAME RESET!"); input.value = ""; return; }
        if (!savedName || savedName === "USER") { let enterName = prompt("ENTER YOUR NAME:"); if (!enterName || enterName.trim() === "") return; savedName = enterName.trim().toUpperCase(); localStorage.setItem('ns_user_fixed', savedName); }
        
        const payload = { 
            userName: savedName, 
            text: msg, 
            image: selectedImgBase64, 
            reply: "", 
            timestamp: Date.now(), 
            uuid: userUUID, 
            isVerified: false,
            quoted: currentReply ? { id: currentReply.id, name: currentReply.name, text: currentReply.text } : null 
        };

        const originalHTML = btn.innerHTML; btn.disabled = true; btn.innerHTML = '<span class="red-dot-loader"></span>';
        try {
            const banCheck = await fetch(`https://nothingcommunity-7664f-default-rtdb.firebaseio.com/banned/${userUUID}.json`); const isBanned = await banCheck.json(); if (isBanned === true) { alert("🚫 YOU ARE BANNED."); return; }
            await fetch(DB_URL, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) }); 
            input.value = ""; clearImage(); cancelReply(); await loadMessages(); 
        } catch (e) { alert("FAILED"); } finally { btn.disabled = false; btn.innerHTML = originalHTML; }
    }

    function toggleMsgActions(bubble) {
        const isActive = bubble.classList.contains('active-actions');
        document.querySelectorAll('.msg-bubble').forEach(b => b.classList.remove('active-actions'));
        if(!isActive) bubble.classList.add('active-actions');
    }

    async function deleteMyMsg(id) {
        if(!confirm("DELETE?")) return;
        try {
            await fetch(`https://nothingcommunity-7664f-default-rtdb.firebaseio.com/chat/${id}.json`, { method: 'DELETE' });
            loadMessages();
        } catch(e) { alert("ERROR"); }
    }

    async function loadMessages() {
        try {
            const [chatRes, verifyRes] = await Promise.all([ fetch(DB_URL), fetch("https://nothingcommunity-7664f-default-rtdb.firebaseio.com/verified_users.json") ]);
            const data = await chatRes.json(); const verifiedData = await verifyRes.json() || {}; const board = document.getElementById('msgBoard');
            if (!data) { board.innerHTML = '<p style="opacity:0.4; text-align:center;">NO MESSAGES YET.</p>'; return; }
            const messages = Object.keys(data).map(key => ({ id: key, ...data[key] }));
            
            board.innerHTML = messages.map(m => {
                const isUserVerified = (m.uuid && verifiedData[m.uuid] === true);
                const tickHtml = isUserVerified ? '<i class="fa-solid fa-circle-check" style="color:#1da1f2; margin-left:4px; font-size:0.8rem;"></i>' : '';
                const isMe = m.uuid === userUUID; const alignClass = isMe ? 'self' : '';
                const deleteBtn = isMe ? `<span class="action-btn del-btn" onclick="event.stopPropagation(); deleteMyMsg('${m.id}')"><i class="fa-solid fa-trash"></i> DELETE</span>` : '';
                
                let quotedHtml = ''; 
                if (m.quoted) { 
                    const replyId = m.quoted.id || ''; 
                    const clickAction = replyId ? `onclick="event.stopPropagation(); scrollToMsg('${replyId}')"` : '';
                    quotedHtml = `<div class="quoted-block" ${clickAction} style="${replyId ? 'cursor:pointer;' : ''}">
                                        <span class="q-name">${m.quoted.name}</span>
                                        <span class="q-text">${m.quoted.text}</span>
                                      </div>`; 
                }

                return `
                <div id="msg-${m.id}" class="msg-bubble ${alignClass}" style="user-select: none;" 
                     onclick="toggleMsgActions(this)">
                    
                    <span class="u-badge" onclick="handleAdminTap(event, '${m.id}', '${m.userName}', ${isUserVerified}, '${m.uuid}')">
                        ${m.userName || 'USER'} ${tickHtml}
                    </span>

                    ${quotedHtml}
                    ${m.image ? `<img src="${m.image}" class="msg-img" onclick="openImageViewer(this.src)">` : ''}
                    
                    <p style="text-transform:none; margin:5px 0;">${m.text}</p>

                    ${m.reply ? `<div class="admin-reply-box"><span class="admin-tag">● ADMIN REPLY</span><p style="text-transform:none; opacity:0.8;">${m.reply}</p></div>` : ''}
                    
                    <div class="msg-footer">
                        <span class="action-btn" onclick="event.stopPropagation(); initReply('${m.id}', '${m.userName}', '${m.text.replace(/'/g, "\\'")}')">
                            <i class="fa-solid fa-reply"></i> REPLY
                        </span>
                        ${deleteBtn}
                    </div>
                </div>`;
            }).join(''); board.scrollTop = board.scrollHeight;
        } catch (e) { console.log(e); }
    }

    /* === NEW TAP LOGIC FOR ADMIN === */
    let adminTapCount = 0;
    let adminTapTimer;

    function handleAdminTap(event, id, name, verified, uuid) {
        event.stopPropagation(); 

        // STRICT ADMIN CHECK HERE
        if (userUUID !== ADMIN_UUID) return;

        adminTapCount++;
        
        clearTimeout(adminTapTimer);

        if (adminTapCount === 2) {
            adminTapCount = 0; 
            if (navigator.vibrate) navigator.vibrate([50, 50, 50]); 
            adminControl(id, name, verified, uuid); 
        } else {
            adminTapTimer = setTimeout(() => {
                adminTapCount = 0;
            }, 400);
        }
    }

    async function adminControl(msgId, currentName, currentStatus, targetUUID) {
        const pass = prompt("ADMIN PASSWORD:"); if (!pass) return;
        if (stringToHash(pass) === "1540218370") {
            const action = prompt(`MANAGE: ${currentName}\nUUID: ${targetUUID ? 'FOUND' : 'MISSING'}\n\n1.REPLY 2.DELETE ALL 3.DELETE SINGLE 4.${currentStatus ? 'UNVERIFY' : 'VERIFY'} 5.BAN 6.UNBAN`);
            const url = `https://nothingcommunity-7664f-default-rtdb.firebaseio.com/chat/${msgId}.json`;
            const banUrl = `https://nothingcommunity-7664f-default-rtdb.firebaseio.com/banned/${targetUUID}.json`;
            const verifyUrl = `https://nothingcommunity-7664f-default-rtdb.firebaseio.com/verified_users/${targetUUID}.json`;
            
            if (action === "1") { const txt = prompt("REPLY:"); if(txt) await fetch(url, { method: 'PATCH', body: JSON.stringify({ reply: txt }) }); }
            else if (action === "2") { 
                if(targetUUID && confirm("⚠️ DELETE ALL MESSAGES FROM THIS USER?")) {
                    const allMsgRes = await fetch(DB_URL);
                    const allData = await allMsgRes.json();
                    if(allData) {
                        const promises = [];
                        Object.keys(allData).forEach(key => {
                            if(allData[key].uuid === targetUUID) {
                                promises.push(fetch(`https://nothingcommunity-7664f-default-rtdb.firebaseio.com/chat/${key}.json`, { method: 'DELETE' }));
                            }
                        });
                        await Promise.all(promises);
                        alert("ALL MESSAGES DELETED!");
                    }
                }
            }
            else if (action === "3") { if(confirm("DELETE THIS MESSAGE?")) await fetch(url, { method: 'DELETE' }); }
            else if (action === "4") { if (!targetUUID) { alert("NO UUID"); return; } if (currentStatus) { await fetch(verifyUrl, { method: 'DELETE' }); alert("UNVERIFIED"); } else { await fetch(verifyUrl, { method: 'PUT', body: JSON.stringify(true) }); alert("VERIFIED"); } }
            else if (action === "5") { if(targetUUID && confirm("BAN?")) { await fetch(banUrl, { method: 'PUT', body: JSON.stringify(true) }); alert("BANNED"); } }
            else if (action === "6") { if(targetUUID) { await fetch(banUrl, { method: 'DELETE' }); alert("UNBANNED"); } }
            loadMessages();
        } else alert("WRONG PASSWORD!");
    }

    function stringToHash(string) { let hash = 0; if (string.length === 0) return hash; for (let i = 0; i < string.length; i++) { const char = string.charCodeAt(i); hash = ((hash << 5) - hash) + char; hash = hash & hash; } return hash.toString(); }
    async function initPresetData() { const grid = document.getElementById('presetGrid'); grid.innerHTML = "<p style='padding:20px; text-align:center;'>LOADING PRESETS...</p>"; try { const res = await fetch("https://raw.githubusercontent.com/nothingcommunity/Testing/main/Camera%20Presets/Presets/presets.json"); const data = await res.json(); grid.innerHTML = data.map(p => `<div class="wp-card"><img src="${p.img}" loading="lazy" width="200" height="250"><div class="wp-overlay"><p>${p.id || 'PRESET'}</p><button class="btn" onclick="runDownload(this, '${p.url}')"><div class="progress-bar"></div><span class="btn-text">GET</span></button></div></div>`).join(''); setTimeout(attachScrollAnimation, 100); } catch(e) { grid.innerHTML = "ERROR"; } }
    async function initWallpaperData() { const grid = document.getElementById('wallpaperGrid'); grid.innerHTML = "<p style='padding:20px; text-align:center;'>LOADING WALLPAPERS...</p>"; try { const res = await fetch("https://raw.githubusercontent.com/nothingcommunity/Testing/main/Wallpapers/Walls/wallpapers.json"); const data = await res.json(); const walls = Array.isArray(data) ? data : data.wallpapers; grid.innerHTML = walls.map(w => `<div class="wp-card"><img src="${w.img}" loading="lazy" width="200" height="250"><div class="wp-overlay"><button class="btn" onclick="runDownload(this, '${w.url}')"><div class="progress-bar"></div><span class="btn-text">DOWNLOAD</span></button></div></div>`).join(''); setTimeout(attachScrollAnimation, 100); } catch(e) { grid.innerHTML = "ERROR LOADING"; } }
    async function generateAIWall() {
        const prompt = document.getElementById('aiPrompt').value.trim(); const ratio = document.getElementById('aiRatio').value; const btn = document.getElementById('genBtn'), aiImg = document.getElementById('aiImg'), resultDiv = document.getElementById('aiResult'), bar = btn.querySelector('.progress-bar'), txt = btn.querySelector('.btn-text');
        if (!prompt) { alert("PLEASE ENTER SOMETHING"); return; }
        btn.style.pointerEvents = 'none'; txt.innerText = 'IMAGINING...'; bar.style.transition = 'width 60s cubic-bezier(0.4, 0, 0.2, 1)'; bar.style.width = '90%'; resultDiv.style.display = 'none'; aiImg.style.opacity = '0';
        let w = 1080, h = 1920; if (ratio === "16:9") { w = 1920; h = 1080; } else if (ratio === "1:1") { w = 1080; h = 1080; }
        const seed = Math.floor(Math.random() * 100000); const url = `https://image.pollinations.ai/prompt/${encodeURIComponent(prompt + ", nothing style, minimal, 8k")}?width=${w}&height=${h}&seed=${seed}&nologo=true&model=flux`;
        try { const res = await fetch(url); if (!res.ok) throw new Error("Error"); const blob = await res.blob(); if (blob.size > 1000000) throw new Error("Rate Limit"); aiImg.src = URL.createObjectURL(blob); resultDiv.style.display = 'block'; setTimeout(() => { aiImg.style.opacity = '1'; resultDiv.scrollIntoView({behavior:'smooth'}); }, 100); bar.style.width = '0%'; bar.style.transition = 'none'; txt.innerText = 'GENERATE AGAIN'; } catch (e) { alert("SERVER BUSY. TRY LATER."); bar.style.width = '0%'; bar.style.transition = 'none'; txt.innerText = 'TRY AGAIN'; } finally { btn.style.pointerEvents = 'all'; }
    }
    async function downloadAIWall(btn) { runDownload(btn, document.getElementById('aiImg').src); }

    function openImageViewer(src) {
        const viewer = document.getElementById('imgViewer');
        const img = document.getElementById('viewImg');
        img.src = src;
        viewer.style.display = 'flex';
        setTimeout(() => viewer.classList.add('active'), 10);
    }

    function closeImageViewer() {
        const viewer = document.getElementById('imgViewer');
        viewer.classList.remove('active');
        setTimeout(() => { viewer.style.display = 'none'; document.getElementById('viewImg').src = ""; }, 300);
    }

    function downloadViewImage() {
        const src = document.getElementById('viewImg').src;
        const a = document.createElement('a');
        a.href = src;
        a.download = "Nothing_Community_Img_" + Date.now() + ".jpg";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
    }

    document.addEventListener('contextmenu', function(e) { if (e.target.tagName === 'IMG') { e.preventDefault(); } }, false);
    window.ondragstart = function() { return false; };
  </script>
</body>
</html>
